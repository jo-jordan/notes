
# Java内存模型
## 起源

## JSR 133

## 指令重排
编译器重排；
CPU寄存器、CPU缓存、内存读写顺序的重排；

## 什么是不正确的同步程序？
这个问题我们限定在Java内存模型内容范围内，现有如下情形：
1. 一个线程读取一个变量的值，
2. 另一个线程写值到这个相同的变量中
3. 读写的顺序是没有被同步排列的

当这些规则被打破，那么变量就会出现*数据竞争*，一个有数据竞争问题的程序就是不正确的同步程序

## 什么是数据竞争(Data Race)
数据竞争发生在
- 一个进程中的多个线程同时访问同一块内存
- 其中至少有一个线程是写操作
- 所有线程均没有使用任何排他锁来控制其对内存的访问

当这些条件被满足时，访问顺序是不确定的，并且计算结果完全取决于每个线程运行的先后顺序，这时，数据竞争就开始了（比如，当内存的访问用于繁忙等待时），但是很多数据竞争是程序中的bug。